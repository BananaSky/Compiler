$name = 0 0
$inheritance = 1    
$constructorargs = 2
$supercall = 3
$constructorbody = 4
$auxillaryargs = 5
$members = 5
$inners = 5
$body = 6
concat $auxillaryargs $inheritance
concat $inners $inheritance
defines
header

    template <
    sep , $auxillaryargs typename-T_@
    >
    class 
    format $name __@__

    branch nonempty $inheritance
        : 
        sep , $inheritance public-T_@ 
    end

    {
    public:
    sep newline $members T_@-@;
    format $name __@__
    (
    sep , $auxillaryargs T_@-set_@
    )

    branch nonempty $inheritance
        : 
        sep , $inheritance T_@(set_@) 
    end

    {
    sep space $members @=set_@;
    }
    sep ;^ $body
    };
    template <
    sep , $constructorargs typename-T_@
    >
    auto $name (
    sep , $constructorargs T_@-@
    ){
    sep newline  $constructorbody @; 

    branch nonempty $supercall
        auto 
        sep space $inheritance T_@-=@(
        sep space $supercall
        );
    end

    return 
    format $name __@__<
    sep , $members decltype(@) source

    branch both nonempty $supercall and nonempty $members
        ,
    end

    branch nonempty $supercall
        sep space $inheritance decltype(T_@)
    end

    >
    (
    sep , $members @ source

    branch both nonempty $supercall and nonempty $members
        ,
    end
    branch nonempty $supercall
        sep space $inheritance T_@
    end
    );
    };

source
    // No source for template class definitions
